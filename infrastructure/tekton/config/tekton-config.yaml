# Based on: https://github.com/tektoncd/operator/blob/v0.77.0/config/crs/kubernetes/config/all/operator_v1alpha1_config_cr.yaml
apiVersion: operator.tekton.dev/v1alpha1
kind: TektonConfig
metadata:
  name: config
spec:
  profile: all
  targetNamespace: tekton-pipelines

  # Disable components that need extra infrastructure
  result:
    disabled: true  # Needs PostgreSQL database
  chain:
    disabled: true  # Needs signing keys and OCI registry setup

  # Keep dashboard enabled (it's useful)
  dashboard:
    readonly: false

  # Prune old PipelineRuns and TaskRuns
  pruner:
    resources:
      - pipelinerun
      - taskrun
    keep: 100
    schedule: "0 8 * * *"
